<apex:page Controller="PBS_LOP_BuildingController" sidebar="false" showHeader="false" standardStylesheets="false"
           cache="true">
    <apex:stylesheet value="{!URLFOR($Resource.gsa_common, 'css/styles.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.gsa_common, 'css/uniform.default.css')}"/>

    <apex:includescript value="{!$Resource.showpopup}"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="{!URLFOR($Resource.modaljquery)}"></script>    
    <apex:stylesheet value="{!$Resource.showpopupcss}"/>
    
    <script type="text/javascript">
            // j.rogers 12/21/2022  SFWS-2105
            if('{!JSENCODE(pageURLForRedirection)}' != ''){
                window.parent.location.href = '{!JSENCODE(pageURLForRedirection)}'; //Todd Brown added JSENCODE to resolve Reflected XSS vulnerability
            	window.parent.document.body = document.createElement('body');
            }
    		else{
        	window.parent.document.body.scrollTop = 0;
  			window.parent.document.documentElement.scrollTop = 0;
       		}
    </script>
    <head>
        <style type="text/css">

            .ui-dialog {
                background: #fff;
                padding: 10px;
                border: 1px solid #999;
            }

            .ui-dialog a {
                float: right;
                font-weight: bold;
                padding: 3px;
                color: #999;
                text-transform: uppercase;
                font-size: 10px;
            }

            .myButton {
                color: white !important;
                background: red !important;
                border-left: 0px !important;
                border-top: 0px !important;
                border-bottom: 0px !important;
                border-right: 0px !important;
                width: 60px !important;
                height: 22px !important;
            }
            
            .labelCls {
              position: relative;
              display: block;
              
            }

            .radioInput {
              position: absolute;
              top: 0;
              left: 0;
            }

            .spanClass {
              display: block;
              margin-left: 25px;
            }

            .errMessage {
                color: red;
            }
            .errorMsg {
            color: red !important;
            }

            body .bPageBlock, body #bodyCell .bResource .secondaryPalette, body .secondaryPalette.bPageBlock, body .individualPalette .secondaryPalette.bPageBlock, body .bodyDiv .genericTable, body .genericPageBlockTable, body .bodyDiv .bSubBlock, body .bComponentBlock .bPageBlock, body .bMyDashboard .bPageBlock, body.rlHoverFrame .bPageBlock, body.subjectSelectionPopup div.choicesBox, body.lookupTab .secondaryPalette.bPageBlock, body.popupTab .secondaryPalette.bPageBlock, body.UserTagStatsPage .secondaryPalette.bPageBlock {
                border-bottom: #fff;
            }

            body .pbBody table.list tr.headerRow td, body .pbBody table.list tr.headerRow th {
                background: #999;
            }

            body .pbBody table.list tr th, body .pbBody table.list tr td {
                border: 1px solid rgb(200, 200, 200);
            }

            body .pbBody table.list tr.headerRow th:first-child, body .pbBody table.list tr.dataRow td:first-child {
                border-left-width: 1px;
            }

            body .pbBody table.list tr.headerRow td, body .pbBody table.list tr.headerRow th {
                border: 0px;
            }

            ul li, ol li {
                margin-left: 0em;
            }

            .message {
                background-color: #fff;
                border-style: solid;
                border-width: 0px;
                color: #000;
                padding: 6px 8px 6px 6px;
                margin: 4px;
            }

            .col1 {
                text-align: left;
                width: 400px;
            }

            .col2 {
                text-align: center;
                width: 230px;
            }

            .col3 {
                text-align: center;
                width: 230px;
            }

            .col4 {
                text-align: center;
                width: 230px;
            }

            .tabbed-table table td {
                background: #fff;
            }

            h2 {
                color: #fff;
                font-size: 80%;
                font-weight: bold;
                padding-left: 40px;
                width: 80%;
            }

            .tabbed-table table th {
                padding-left: 3px;
                padding-right: 3px;
                font-size: 12px important !;
            }

            .hr {
                font-weight: bold;
                font-size: 28px;
                border-bottom: 1px solid #cccccc;
                padding: 0 0 8px;
                color: #002BAD;
                padding-top: 15px;
            }

            menu.table-options {
                top: 40px;
                left: -350px;
            }

            .custRadio tr td{
                padding-top:0px;
            }
<!-- SGanti added 10/2021 -->            
            .custRadio1 tr td{
                padding-top:0px;
                padding-bottom:0px;
                
            }
            .custRadio2 tr td{
                padding-top:0px;
                text-indent: 40px;
                margin-left: 30px;
                text-align: justify;
                padding-bottom:0px;
            }
<!-- SGanti added 11/2021 -->            
            
            .custRadio3 tr td{
                padding-top:0px;
                text-indent:40px;
                margin-left: 30px;
                text-align: justify;
                padding-bottom:0px;
                float:left;
            }
<!--Ramya added 07/2022-->            
             .custRadio4 tr td{
                padding-top:0px;
                margin-left:30px;
                text-align: justify;
                padding-bottom:0px;
                padding-left:70px;
                text-indent:-25px;
                float:left;
            }
            
           .formwrap1 td {ul.process
                padding-top:0px;
            }
              .infopopup {
              position:fixed !important;
              display:inline-block;
              top:20% !important;
              left:50% !important;
              //width:700px !important;
              //height 800px !important;
              margin-left:-350px !important;
              margin-top:-350px !important;
            //transform: translate(-50%, -50%); !important;
            }
            .infopopup1 {
              position:fixed !important;
              display:inline-block;
              top:32% !important;
              left:50% !important;
              //width:700px !important;
              //height 800px !important;
              margin-left:-350px !important;
              margin-top:-350px !important;
            //transform: translate(-50%, -50%); !important;
            }
            .infopopup2 {
              position:fixed !important;
              display:inline-block;
              top:45% !important;
              left:50% !important;
              //width:700px !important;
              //height 800px !important;
              margin-left:-350px !important;
              margin-top:-350px !important;
            //transform: translate(-50%, -50%); !important;
            }
            .infopopup3 {
              position:fixed !important;
              display:inline-block;
              top:56% !important;
              left:50% !important;
              //width:700px !important;
              //height 800px !mportant;
              margin-left:-350px !important;
              margin-top:-350px !important;
            //transform: translate(-50%, -50%); !important;
            }
        </style>
        
        <script type="text/javascript">
            $j = jQuery.noConflict();
            $j(document).ready(function(){
                updateOffer(); 
                
                switch("{!JSENCODE(selectedASL)}"){
                    case "Improvements Needed":
                        $j("#aslImprNeeded").attr('checked', 'true');
                        break;
                    case "Already Meets":
                        $j("#aslAlrMeets").attr('checked', 'true');
                        break;
                    case "New Construction":
                        $j("#aslNewConst").attr('checked', 'true');
                        break;
                }
                
                switch("{!JSENCODE(selectedAreaType)}"){
                    case "Square Feet":
                        $j("#atSqFeet").attr('checked', 'true');
                        break;
                    case "Acres":
                        $j("#atAcres").attr('checked', 'true');
                        break;
                }
            });
            
            function aslToggle(value) {
                aslToggleMethod(value);
            }
            
            function areaTypeToggle(value) {
               areaTypeToggleMethod(value);  
            }
            var validate = function(e) {
              var t = e.value;
              e.value = (t.indexOf(".") >= 0) ? (t.substr(0, t.indexOf(".")) + t.substr(t.indexOf("."), 3)) : t;
            }        
        </script>
    </head>
    <body onload="init()">
    
<!-- J. Rogers  Eliminate Headers
<div id="login">
        <ul>
            <li><a href="/RSAP/portalHome">RSAP Home</a> </li>
            <li>|</li>
            <li><a href="/AAAP/portalHome">AAAP</a></li>
            <li>|</li>
            <apex:panelGroup rendered="{!AND(ISPICKVAL($User.UserType,'Guest'), $Site.LoginEnabled)}">
                <apex:outputLink value="/AAAP/home/home.jsp">
                    <li>{!$Label.site.login_button}</li>
                </apex:outputLink>
                <li> |</li>
                <apex:outputLink value="/AAAP/ForgotPassword">
                    <li>{!$Label.site.forgot_your_password_q}</li>
                </apex:outputLink>
                <apex:outputText value="<li> | </li>" rendered="{!$Site.RegistrationEnabled}"/>
                <apex:outputLink value="/AAAP/SiteRegister" rendered="{!$Site.RegistrationEnabled}">
                    <li>{!$Label.site.new_user_q}</li>
                </apex:outputLink>
            </apex:panelGroup>
            <apex:outputLink value="{!$Site.Prefix}/secur/logout.jsp"
                             rendered="{!NOT(ISPICKVAL($User.UserType,'Guest'))}">
                <li>{!$Label.site.logout}</li>
            </apex:outputLink>
        </ul>
    </div  -->
 
    <div id="wrapper" style="overflow:none;height:auto !Important">
        <c:lop_inside_header />
        <div id="content" class="building" style="overflow:none;height:auto !Important"><!-- CLASS SHOULD BE CHANGED TO CURENT PAGE SEE LINE 331 of STYLES.CSS -->
            <apex:panelGrid rendered="{!!isValidUser}">
                <apex:outputLabel styleClass="errMessage">ERROR:</apex:outputLabel>
                <apex:messages styleClass="errMessage" id="errmessage"/>
            </apex:panelGrid>
            <apex:panelGroup rendered="{!isValidUser}">
                <apex:panelGrid columns="2" style="float:right"><a href="#" onclick="window.print();"></a>
                    <apex:outputLabel style="padding-right:47px"></apex:outputLabel>
                </apex:panelGrid>
                <br/>

                <c:lopHeader myOffer="{!lopOffer}" myProject="{!rlp}" offerDueDate=""/>
                <!--<c:lopProgressBar myValue="{!lopOffer.Id}" myEdit="{!isEditable}"/>-->
                <c:PBS_LOP_ProgressBar myValue="{!lopOffer.Id}" step="0" linksToViewModePage="{!isEditable}"/>

            </apex:panelGroup>
            <apex:form id="newOffer" style="height: auto !important;overflow:hidden">
                <apex:actionRegion rendered="{!isValidUser}">
                    <apex:actionFunction name="deleteOffer" action="{!actionDeleteOffer}"></apex:actionFunction>
                    <apex:actionFunction name="updateOffer" action="{!updateOfferDetails}" oncomplete=""/>
                       <apex:actionFunction name="aslToggleMethod" rerender="aslVal1" action="{!aslToggleAction}">
                                    <apex:param name="sRadio" assignTo="{!selectedASL}" value="" />
                                </apex:actionFunction>
                                <apex:actionFunction name="areaTypeToggleMethod" rerender="aslVal1" action="{!areaTypeAction}">
                                    <apex:param name="sRadio" assignTo="{!selectedAreaType}" value="" />
                                </apex:actionFunction>
                    <apex:outputPanel id="thePanelform1" layout="block" styleClass="formwrap">
                        <div class="hr">Building Information</div>

                        <apex:messages styleClass="errMessage" id="message"/>
                        <apex:inputHidden id="draftMsgFlag" value="{!draftMsgFlag}"/>
                        <apex:inputHidden value="{!pageURL}" id="pgUrl"/>
                        <apex:outputPanel >
                            <apex:outputLabel id="msgErr02" styleClass="errMessage" value=""/>
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!viewOnly}">
                            <apex:outputLabel id="msgview" styleClass="errMessage" value="{!viewMsg}"/>
                        </apex:outputPanel>

                        <apex:panelGrid columns="2" id="bld_addr_fields">

                            <apex:outputPanel >
                                <apex:outputtext value="1. Building Name"/>
                                <span class="required">*</span></apex:outputPanel>
                            <apex:inputText value="{!lopOffer.PBS_AAAP_Building_Name__c}" id="bname"/>


                            <apex:outputPanel >2. Building Street Address<span class="required">*</span><a class="popup"
                                                                                                 href="#Modal_Bldg_Ques3"><img
                                    src="{!$Resource.Info_Icon}"/></a>
                                <div id="Modal_Bldg_Ques3" class = "infopopup"
                                     style="display:none; background:#eee; border:1px solid #666; border-radius:5px; padding:15px;">
                                    <p>Report the offered building street address in geo-codable format, i.e., an
                                        address that can be mapped by <br/>
                                        geographic information system software or used by an overnight delivery service
                                        to deliver packages. <br/>
                                        An example of a geo-codable address is 1800 F Street. Do NOT use the following:
                                        <br/>
                                        - Mailing address that is different than the locations address,<br/>
                                        - Building name, <br/>- Street corner (e.g., 18th &amp; F Streets), <br/>
                                        - Other description (such as a Post Office Box number), or <br/>
                                        - Symbols such as double quote ("), underline (_), plus (+), percent (%), and
                                        ampersand (&amp;).</p>
                                </div>
                            </apex:outputPanel>
                            <apex:inputText value="{!lopOffer.PBS_AAAP_Street_Address__c}" id="bstreet"/>


                            <apex:outputPanel >
                                <apex:outputtext value="3. City"/>
                                <span class="required">*</span></apex:outputPanel>
                            <apex:inputText value="{!lopOffer.PBS_AAAP_City__c}" id="bcity"/>


                            <apex:outputPanel >
                                <apex:outputtext value="4. State"/>
                                <span class="required">*</span></apex:outputPanel>

                            <apex:selectList value="{!lopOffer.PBS_AAAP_State__c}" id="bstate" size="1">
                                <apex:selectOptions value="{!states}"></apex:selectOptions>
                            </apex:selectList>


                            <apex:outputPanel >
                                <apex:outputtext value="5. 9-Digit ZIP Code"/>
                                <span class="required">*</span></apex:outputPanel>
                            <apex:inputText value="{!lopOffer.PBS_AAAP_ZipCode__c}" id="bzip" onblur="validateZip();"/>
                        </apex:panelGrid>
                        <apex:outputPanel id="other_bldg_data" layout="block">
                            <apex:panelGrid columns="1" id="theGridsection2">
<!--SGanti reworded question 6. 10/2021-->
                                <apex:outputPanel >
                                    <apex:outputtext value="6.  Number of Floors in Building:"/>
                                    <span class="required">*</span><br/>
                                    <apex:inputField value="{!lopOffer.PBS_AAAP_floors_Suites_in_Offered_Space__c}"
                                                     id="bnumfloors"/>

                                </apex:outputPanel>

                                <apex:outputPanel >
<!--SGanti reworded question 7. 10/2021-->
                                    
                                    <apex:outputtext value="7.  Total Rentable Square Feet (RSF) in Building:"/>
                                    <span class="required">*</span>
                                    <a class="popup" href="#Modal_Bldg_Ques13"><img src="{!$Resource.Info_Icon}"/></a>
                                    <div id="Modal_Bldg_Ques13" class = "infopopup1"
                                         style="display:none; background:#eee; border:1px solid #666; border-radius:5px; padding:15px;">
                                        <p>Rentable square feet is the area for which a tenant is charged rent. It is determined by the building owner<br/>
                                            and may vary by city or by building within the same city. The rentable space may include a share of building<br/>
                                            support/common areas such as elevator lobbies, building corridors, and floor service areas. <br/>
                                            Floor service areas typically include restrooms, janitor rooms, telephone closets, electrical closets,  <br/>
                                            and mechanical rooms. The rentable space does not include vertical building penetrations and their <br/>
                                            enclosing walls, such as stairs, elevator shafts, and vertical ducts.
                                        </p>
                                    </div>
                                    <br/>
                                    <apex:inputField value="{!lopOffer.PBS_AAAP_GEN_PURPOSE_RENTABLE__c}" id="brsf" onkeyup="validate(this)"/>

                                </apex:outputPanel>

                                <apex:outputPanel id="BuildingSpace">
                                    <table>
                                        <tr>
                                            <th style="text-align:center">&nbsp;</th>
                                            <th style="text-align:center">RSF</th>
                                        </tr>
                                        <tr>
                                            <td align="left">
                                                <apex:outputText value="a. General Purpose (Office): "/>
                                                <span class="required">*</span></td>
                                            <td>
                                                <apex:inputField value="{!lopOffer.PBS_AAAP_OFFICE_SPACE_RSF__c}" onkeyup="validate(this)"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td align="left">
                                                <apex:outputText value="b. Warehouse: "/>
                                            </td>
                                            <td>
                                                <apex:inputField value="{!lopOffer.PBS_AAAP_RETAIL_SPACE_RSF__c}" onkeyup="validate(this)"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td align="left">
                                                <apex:outputText value="c. Other: "/>
                                            </td>
                                            <td>
                                                <apex:inputField value="{!lopOffer.PBS_AAAP_GARAGE_SPACE_RSF__c}" onkeyup="validate(this)"/>
                                            </td>
                                        </tr>
                                    </table>
                                </apex:outputPanel>
<!--SGanti added 10/2021 -->
                            </apex:panelGrid>

<!--SGanti commented out 10/2021
                                
                                <apex:outputPanel >
                                    <apex:outputtext value="8.  What is the live floor load (pounds per square feet) for the building?"/>
                                    <a class="popup" href="#Modal_Bldg_Ques15"><img src="{!$Resource.Info_Icon}"/></a>
                                    <div id="Modal_Bldg_Ques15"
                                         style="display:none; background:#eee; border:1px solid #666; border-radius:5px; padding:15px;">
                                        <p>Office areas shall have a minimum live load capacity of 50 pounds per<br/>
                                            ANSI/BOMA Office Area square foot plus 20 pounds per ANSI/BOMA Office <br/>
                                            Area square foot for moveable partitions. Storage areas shall have<br/>
                                            a minimum live load capacity of 100 pounds per ANSI/BOMA Office Area <br/>
                                            square foot including moveable partitions. A report showing the floor <br/>
                                            load capacity, at no cost to the Government, by a registered professional<br/>
                                            engineer may be required. Calculations and structural drawings may also be <br/>
                                            required.
                                        </p>
                                    </div>

                                    <br/>
                                    <apex:inputField Id="liveflrLoad" value="{!lopOffer.PBS_AAAP_LIVE_FLOOR_LOAD__c}" onkeydown="limitfieldvalue('{!$Component.liveflrLoad}');" onkeyup="limitfieldvalue('{!$Component.liveflrLoad}');"/>
                                </apex:outputPanel>

                            </apex:panelGrid>

                            <br/>
                            <apex:outputtext value="{!$Label.LOP_site_size}" style="margin-left:5px;font-size:10pt;"/><br/>
                            <table style="margin-top: -20px;">
                                <td >
                                    <apex:inputField value="{!lopOffer.PBS_AAAP_SITE_SIZE_SQFT__c}" id="siteSize"/>
                                </td>
                                <td>
                                    <apex:selectRadio styleClass="radioCell" value="{!lopOffer.PBS_AAAP_SITE_AREA_TYPE__c}"
                                                      id="siteSizeOption">
                                        <apex:selectOptions value="{!siteSizeItems}"/>
                                    </apex:selectRadio>
                                </td>
                            </table>
-->
<!--SGanti reworded question 10. 10/2021-->                                    

                            <apex:panelGrid columns="1">
                                
                                <apex:outputPanel >
                                    <apex:outputtext value="8. In what year was the original building construction completed and ready for initial occupancy?"/>
                                    <span class="required">*</span>
                                    <a class="popup" href="#Modal_Bldg_Ques80"><img src="{!$Resource.Info_Icon}"/></a>
                                    <div id="Modal_Bldg_Ques80" class = "infopopup2"
                                         style="display:none; background:#eee; border:1px solid #666; border-radius:5px; padding:15px;">
                                        <p>If new construction is proposed, enter the projected year the space will be ready for occupancy.
                                        </p>
                                    </div>
                                    <br/>
                                    
                                    <apex:inputField value="{!lopOffer.PBS_RSAP_Year_Built__c}" id="yearconstructed"/>
                                    <apex:outputText id="q1years" style="font-weight: !bold;"
                                                     value=""></apex:outputText>
                                </apex:outputPanel>


                                <apex:outputPanel >
<!--SGanti reworded question 10 and changed input text area size. 10/2021-->                                    
                                   
                                    <apex:outputtext value="9. Provide the year and a brief description of the last major building renovation, if applicable:"/>
                                    <br/>
                                <!--    <apex:inputField value="{!lopOffer.PBS_AAAP_Renovation_Year__c}"/> -->
                                    <apex:inputTextarea id="renoYearTA" value="{!lopOffer.PBS_RSAP_Renovation_Year__c}" styleClass="aaapTextArea" html-maxlength="128" onkeyup="updateRenoYearTACounter()"/><br/>
                                    <apex:outputText id="renoYearTACounter" />&#160;Characters Used
                                </apex:outputPanel>
                            
                                <!-- Ramya added question 10.  06/22022 -->
                                <apex:outputPanel >
                                  <apex:outputtext value="10. Select the approximate level of construction necessary to meet the building shell requirements:"/>
                                       <span class="required">*</span><br/>
                                        <label class="labelCls">
                                            <input type="radio" class="radioInput" name="aslRadio" id="aslImprNeeded" value="Improvements needed" onclick="aslToggle(this.value); "/>
                                            <span class="spanClass">
                                                Improvements to the existing Building will be required to meet the building shell requirements.
                                                The approximate construction cost to achieve Lease shell standards is: 
                                                $<apex:inputField value="{!lopOffer.PBS_AAAP_SHELL_Build_out_Costs__c}" onkeyup="validate(this)"/>
                                            </span>
                                        </label>
                                       
                                        <label class="labelCls">
                                            <input type="radio" class="radioInput" name="aslRadio" id="aslAlrMeets" value="Already Meets" onclick="aslToggle(this.value); "/>
                                            <span class="spanClass">
                                                The Building already meets all the Lease shell requirements; no improvements are necessary.
                                            </span>
                                        </label>
                                        
                                       
                                        <label class="labelCls">
                                            <input type="radio" class="radioInput" name="aslRadio" id="aslNewConst" value="New Construction"  onclick="aslToggle(this.value); "/>
                                            <span class="spanClass">
                                                The requirements of the Lease will be satisfied through the construction of a new building.
                                            </span>
                                        </label>
                                        
                                        
                                        <apex:outputPanel id="aslVal2" >
                                            
                                            <table width="100%">
                                            <tr width="100%">
                                                <td width="60%">
                                                    <label class="labelCls" style="padding-left: 25px;">
                                                    Land Site Size: <apex:inputField value="{!lopOffer.PBS_AAAP_SITE_SIZE_SQFT__c}" onkeyup="validate(this)"/>
                                                    <input type="radio" name="lssMeasurment" id="atSqFeet" value="Square Feet" onclick="areaTypeToggle(this.value); ">
                                                        Square Feet
                                                    </input>
                                                    <input type="radio" name="lssMeasurment" id="atAcres" value="Acres" onclick="areaTypeToggle(this.value); ">
                                                        Acres
                                                    </input>
                                                    </label>
                                                </td>
                                                
                                                <td width="40%">
                                                    Total Land Costs:
                                                    <a class="popup" href="#Modal_Bldg_Ques81"><img src="{!$Resource.Info_Icon}"/></a>
                                                    <div id="Modal_Bldg_Ques81" class = "infopopup3"
                                                    style="display:none; background:#eee; border:1px solid #666; border-radius:5px; padding:15px;">
                                                    <p>This is the total cost to the offeror to purchase land as a means to construct the proposed building, if applicable.
                                                    </p>
                                                    </div>
                                                    
                                                    $<apex:inputField value="{!lopOffer.PBS_AAAP_Total_Land_Cost__c}" onkeyup="validate(this)"/>
                                                </td>
                                            </tr>
                                            </table>
                                            
                                        </apex:outputPanel>       
                                    </apex:outputPanel>
                                    
                                                    
                                <!--SGanti reworded question 11. 10/2021-->                                    

                                <apex:outputPanel id="HVAC" layout="block">
                                    <apex:outputtext value="11. What are the Building’s normal hours of operations for HVAC included in the Operating Costs?"/>
                                    <span class="required">*</span>
                                    <table>
                                        <tr>
                                            <td align="right">
                                                <apex:outputText value="{!$Label.PBS_AAAP_Mon_Fri_Hours_Start}"/>
                                            </td>
                                            <td>
                                                <apex:inputField value="{!lopOffer.PBS_AAAP_HVAC_HRS_MON_TO_FRI_START__c}"
                                                        id="hvachrs"/>
                                            </td>
                                            <td align="right">
                                                <apex:outputText value="{!$Label.PBS_AAAP_Building_Hours_End}"/>
                                            </td>
                                            <td>
                                                <apex:inputField value="{!lopOffer.PBS_AAAP_HVAC_HRS_MON_TO_FRI_END__c}"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td align="right">
                                                <apex:outputText value="{!$Label.PBS_AAAP_SAT_Hours_Start}"/>
                                            </td>
                                            <td>
                                                <apex:inputField value="{!lopOffer.PBS_AAAP_HVAC_HRS_ON_SAT_START__c}"/>
                                            </td>
                                            <td align="right">
                                                <apex:outputText value="{!$Label.PBS_AAAP_Building_Hours_End}"/>
                                            </td>
                                            <td>
                                                <apex:inputField value="{!lopOffer.PBS_AAAP_HVAC_HRS_ON_SAT_END__c}"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td align="right">
                                                <apex:outputText value="{!$Label.PBS_AAAP_SUN_Hours_Start}"/>
                                            </td>
                                            <td>
                                                <apex:inputField value="{!lopOffer.PBS_AAAP_HVAC_HRS_ON_SUN_START__c}"/>
                                            </td>
                                            <td align="right">
                                                <apex:outputText value="{!$Label.PBS_AAAP_Building_Hours_End}"/>
                                            </td>
                                            <td>
                                                <apex:inputField value="{!lopOffer.PBS_AAAP_HVAC_HRS_ON_SUN_END__c}"/>
                                            </td>
                                        </tr>
                                    </table>
                                </apex:outputPanel>
<!--SGanti replaced PBS_AAAP_FIRE_SAFETY_CERT__c with PBS_AAAP_Fire_Life_Meets__c 10/2021-->
                                                                                                     
                                 <apex:outputPanel >
                                    <apex:outputtext value="{!$Label.LOP_Fire_Protection_and_Life_Safety}"/>
                                    <span class="required">*</span><br/>
                               
                                     <apex:selectRadio styleClass="custRadio"
                                                      value="{!lopOffer.PBS_AAAP_FIRE_SAFETY_CERT__c}"
                                                      id="fireProtection" layout="pageDirection">
                                        <apex:selectOptions value="{!fireProtectionItems}"></apex:selectOptions>
                                    </apex:selectRadio>
                                </apex:outputPanel>
                            
<!--SGanti 10/2021-->

                                <apex:outputPanel >
                                    <apex:outputtext value="{!$Label.LOP_Lease_Accessibility_Standards}"/>
                                    <span class="required">*</span><br/>
                                
                                    <apex:selectRadio styleClass="custRadio"
                                                      value="{!lopOffer.PBS_RSAP_Accessibility_Standards_Met__c}"
                                                      id="standardMet" layout="pageDirection">
                                        <apex:selectOptions value="{!accessibilityItems}"></apex:selectOptions>
                                    </apex:selectRadio>
                                </apex:outputPanel>
                                
<!--SGanti added 10/2021-->
                                
                               <apex:outputPanel >
                                    <apex:outputtext value="{!$Label.LOP_RLP_Asbestos}"/>
                                        <span class="required">*</span><br/>
                                            <apex:selectCheckboxes styleClass="custRadio" value="{!getAsbestosItems}" layout="pageDirection">
                                        <apex:selectOptions value="{!getAsbestos}"/>
                                            </apex:selectCheckboxes>
                                </apex:outputPanel> 
                                
                                <apex:outputPanel >
<!--SGanti reworded custom label for LOP_Flood_Plains. 10/2021-->                                    
                                    
                                    <apex:outputtext value="{!$Label.LOP_Flood_Plains}"/>
                                    <span class="required">*</span><br/>
                                    <apex:selectRadio styleClass="custRadio"
                                                      value="{!lopOffer.PBS_RSAP_Flood_Plain_Declaration__c}"
                                                      id="floodPlains" layout="pageDirection">
                                        <apex:selectOptions value="{!floodPlainItems}"></apex:selectOptions>
                                    </apex:selectRadio>
                                </apex:outputPanel>
                        <apex:outputPanel >
<!--SGanti reworded . 10/2021-->                                    
                                    
                                    <apex:outputtext value="16. With regard to Seismic Safety of the Building, does the RLP contain seismic requirements?"/>
                                    <span class="required">*</span><br/>
                                    <apex:selectRadio styleClass="custRadio"
                                                      value="{!lopOffer.PBS_AAAP_BUILDING_LOCATED_SEISMIC_ZON__c}"
                                                      id="seismicOptions" onchange="resetSeismicFields();"
                                                      >
                                        <apex:selectOptions value="{!seismicOptions}"></apex:selectOptions>
                                    </apex:selectRadio>                               
                                                                      
                                                                
<!--SGanti reworded . 10/2021-->                                    
                                    <apex:outputPanel id="seismicPanel">
                                        <br/>                                        
                                        <apex:outputtext value="16a. Since the RLP contains seismic requirements, select one of the following and attach appropriate documentation in the Attachments section:"/>
                                        <span class="required">*</span><br/>
                                        <apex:selectRadio styleClass="custRadio"
                                                          value="{!lopOffer.PBS_RSAP_Offeror_Seismic_Declaration__c}"
                                                          id="seismic" layout="pageDirection">
                                            <apex:selectOptions value="{!seismicItems}"></apex:selectOptions>
                                        </apex:selectRadio>
                                    </apex:outputPanel>
                         </apex:outputPanel> 
<!--SGanti commented out 10/2021
                                <apex:outputPanel >
                                    <apex:outputtext value="{!$Label.LOP_Historic_Tier_Of_The_Building_Property}"/>
                                    <span class="required">*</span><br/>
                                    <apex:selectRadio styleClass="custRadio" value="{!hisString}" layout="pageDirection"
                                                      id="historicTier">
                                        <apex:selectOptions value="{!historicTierOptions}"></apex:selectOptions>
                                    </apex:selectRadio>
                                </apex:outputPanel>
-->
<!--SGanti commented out 10/2021
 
                                <apex:outputPanel >
                                    
                                    <apex:outputtext value="{!$Label.LOP_RLP_Asbestos}"/>
                                    <span class="required">*</span><br/>
                                    <apex:selectRadio styleClass="custRadio"
                                                      value="{!lopOffer.PBS_RSAP_Asbestos_Declaration__c}" id="asbestos"
                                                      layout="pageDirection">
                                        <apex:selectOptions value="{!asbestosItems}"></apex:selectOptions>
                                    </apex:selectRadio>
                                </apex:outputPanel>
-->



                            
<!--SGanti reworded the question 17 and 17a. 10/2021 -->
                                <apex:outputPanel id="energyStarSection" layout="block" style="width: 812px;">
                                     <label class="labelCls">
                                       <span class="radioInput">17.</span>
                                        <span class="spanClass">
                                          Has the Property received the ENERGY STAR® Label conferred by the Environmental Protection Agency (EPA) within the past twelve months?
                                           <span class="required">*</span>
                                            <!-- <a class="popup" href="#Modal_Bldg_Ques8"><img src="{!$Resource.Info_Icon}"/></a> -->
                                        </span>
                                    </label>
                                    
                                    <!-- <div id="Modal_Bldg_Ques8"
                                         style="display:none; background:#eee; border:1px solid #666; border-radius:5px; padding:15px;">
                                        <p>Existing buildings must have earned the Energy Star label in the most recent year or
                                            will have obtained it prior to lease award, <br/>unless the offered space meets one of the
                                            statutory exceptions as described in the RLP. All new construction shall achieve an<br/>
                                            Energy Star label within 18 months after occupancy by the Government. The  offeror is
                                            encouraged to include shared savings in<br/> the offer as a result of the energy upgrades
                                            where applicable. ENERGY STAR tools and resources can be found at the <br/>www.energystar.gov
                                            Web site. The term "most recent year" means that the date of the award of the Energy Star
                                            label by EPA <br/>must not be more than 1 year prior to the lease award date. To earn the Energy
                                            Star label, a building owner or representative <br/>must follow the instructions on the Energy
                                            Star website.</p>
                                    </div> -->
                                    
                                    <apex:actionRegion >
                                        <apex:selectRadio styleClass="custRadio"
                                                          value="{!lopOffer.PBS_AAAP_Energy_Star__c}" id="benergystar"
                                                          onchange="resetEnergyStarFields();">
                                                 <!--<apex:actionSupport event="onchange" action="{!displayEnergyStarText}" reRender="eStar"/> -->
                                                 <apex:actionSupport event="onchange" reRender="eStar"/>

                                            <apex:selectOptions value="{!items}"/>
                                        </apex:selectRadio>
                                    </apex:actionRegion>
<!--SGanti added 11/2021 -->
                                  <br/>   
<!--SGanti reworded 17a. and added logic for energy star response = "No". 10/2021 
                                    
                                    <apex:outputPanel id="noEnergyStarPanel" >
                                        <apex:outputtext >17a.  The Property has not received the ENERGY STAR Label within the past twelve months but falls into one of the following categories:</apex:outputtext>
                                        <br/>
                                        <apex:selectRadio styleClass="custRadio"
                                                          value="{!lopOffer.PBS_RSAP_Energy_Star_Response_No__c}" id="noenergystar" 
                                                          layout="pageDirection">
                                            <apex:actionSupport event="onchange" reRender="eStar"/>
                                            <apex:selectOptions value="{!energyStarResponseNo}"/>
                                        </apex:selectRadio>
                                        </apex:outputPanel>
-->
<!--SGanti reworded 17a. 10/2021 -->
                                            
                                    <apex:outputPanel id="certificationDatePanel" >
                                       <apex:outputtext value="17a. Date of Certification (MM/DD/YYYY)"/>
                                        <br/>
                                        <apex:outputLabel id="startdate">
                                            <apex:inputField value="{!lopOffer.PBS_AAAP_CERTIFICATION_DATE__c}"
                                                             id="certificationDate"/>
                                            <apex:outputLabel id="dateFormat"></apex:outputLabel>
                                        </apex:outputLabel>
                                    </apex:outputPanel>
<!--SGanti added logic for energy star response = "No", "statutory exceptions" and Cost Effective or not. 10/2021 -->
                                    
                            <apex:outputPanel id="noEnergyStarPanel" >
                                    <apex:outputtext style="display: inline-block;margin-left:25px; text-indent: -30px" value="17a.  The Property has not received the ENERGY STAR Label within the past twelve months, but falls into one of the following categories:"></apex:outputtext>
                                        <br/>
                                     <apex:selectRadio styleClass="custRadio1"
                                                          value="{!lopOffer.PBS_RSAP_Energy_Star_Response_No__c}" id="noenergystar" onchange="resetEnergyStarMeetExceptions();"
                                                          layout="pageDirection">
                                            <apex:actionSupport event="onchange" reRender="eStar"/>
                                            <apex:selectOptions value="{!energyStarResponseNo}"/>
                                        </apex:selectRadio>                                                                         
                             </apex:outputPanel>
                         
                            <apex:outputPanel id="eStarException1">
                                      <!-- SGanti: display options for "Meets exceptions" -->                                        
                                <!-- <apex:selectRadio styleClass="custRadio2"
                                                          value="{!lopOffer.PBS_RSAP_Energy_Star_Meets_Exceptions__c}" 
                                                        id="eStarMeetException1" layout="pageDirection">
                                            <apex:actionSupport event="onchange" rerender="eStarExcep1"/>
                                            <apex:selectOptions value="{!energyStarMeetsExceptions}"/>
                                        </apex:selectRadio>
                                -->    
                               <div style="float:right;position:relative">
                                                                  
                                <apex:selectRadio styleClass="custRadio4"
                                                          value="{!lopOffer.PBS_RSAP_Energy_Star_Meets_Exceptions__c}" 
                                                        id="eStarMeetException1" layout="pageDirection">
                                            <apex:actionSupport event="onchange" rerender="eStarExcep1"/>
                                            <apex:selectOptions value="{!energyStarMeetsExceptions}"/>
                                        </apex:selectRadio>   
                              </div>  
                            
                               </apex:outputPanel>

                        <apex:outputPanel id="eStarException2" >
                            <br/>
                              <!--<apex:outputtext style="display: inline-block; margin-left: 25px" value="With regard to offers falling into a statutory exception category above, the Offeror has evaluated energy efficiency and conservation improvements and has determined:">
                                    </apex:outputtext>-->
  <!--ramya: aligned statements for userstory SFWS-1483-->  
                                  <apex:outputtext style="display: inline-block;margin-top: 10px; margin-left: 75px" value="With regard to offers falling into a statutory exception category above, the Offeror has evaluated energy efficiency and conservation improvements and has determined:">
                                    </apex:outputtext>  
                                  <br/>   
                                <!--       <apex:selectRadio styleClass="custRadio2"
                                                          value="{!lopOffer.PBS_AAAP_Energy_Star_Evaluation__c}" 
                                                        id="eStarMeetException2" layout="pageDirection">
                                            <apex:actionSupport event="onchange" rerender="eStarExcep2"/>
                                            <apex:selectOptions value="{!energyStarCost}"/>
                                        </apex:selectRadio>
                                -->
                                            <apex:selectRadio styleClass="custRadio3"
                                            
                                                  value="{!lopOffer.PBS_AAAP_Energy_Star_Evaluation__c}" 
                                                        id="eStarMeetException2" layout="pageDirection">
                                            <apex:actionSupport event="onchange" rerender="eStarExcep2"/>
                                            <apex:selectOptions value="{!energyStarCost}"/>
                                        </apex:selectRadio>
                            </apex:outputPanel>                                                                     
                     </apex:outputPanel>                                    

                                
<!--SGanti added new question 18 on 10/2021 -->
                                <apex:outputPanel id="historic1" >
                                       <apex:outputtext value="18. Is the Building a historic property?"/>
                                        <span class="required">*</span>                                        
                                        <br/>
                                        <apex:selectRadio styleClass="custRadio"
                                                      value="{!lopOffer.PBS_RSAP_Building_is_a_historic_property__c}"
                                                      id="historicBldg1">
                                        <apex:selectOptions value="{!items}">
                                            </apex:selectOptions>
                                    </apex:selectRadio>
                                    </apex:outputPanel>                                                             
                                
<!--SGanti added new question 19 on 10/2021 -->
                                <apex:outputPanel id="historic2" >
                                       <apex:outputtext value="19. Is the Building within a historic district?"/>
                                        <span class="required">*</span>                                        
                                        <br/>
                                        <apex:selectRadio styleClass="custRadio"
                                                      value="{!lopOffer.PBS_RSAP_Bldg_within_a_historic_district__c}"
                                                      id="historicBldg2">
                                        <apex:selectOptions value="{!items}">
                                            </apex:selectOptions>
                                    </apex:selectRadio>    
                                    </apex:outputPanel>                                                                                                                        
                                

                                <apex:outputPanel >
                                    <apex:outputtext value="{!$Label.LOP_HubZone}"/>
                                    <span class="required">*</span><br/>
                                    <apex:selectRadio styleClass="custRadio" value="{!hubZoneStr}" id="hubZone"
                                                      layout="pageDirection">
                                        <apex:selectOptions value="{!hubZoneItems}"></apex:selectOptions>
                                    </apex:selectRadio>
                                </apex:outputPanel>

                                <apex:panelGrid columns="1">
                                <!--   <apex:actionFunction name="btnJQSubmit" action="{!redirectToParking}"></apex:actionFunction> -->
                                   
                                    
                                    <apex:outputPanel rendered="{!!viewOnly}">

                                        <apex:commandButton id="btnSaveForm" value="Save Page" styleClass="btnSave"
                                                            action="{!saveBuilding}" onclick="return validateZip();"/>
                                        <apex:commandButton id="btnSave" value="Next" action="{!redirectToParking}"
                                                            onclick="return validateZip();" styleClass="btnJQSubmit"/>
                                        <!--   SFWS 2105  j.rogers 1/18/2023
                                        <apex:commandButton value="Exit Offer" action="{!actionCancel}"
                                                            onclick="if(confirm('Please make sure to hit save page before exiting your offer.  Changes will not be saved unless you hit Save Page.')){return true;} else return false;"/>
                                        -->
                                        <apex:commandButton value="Exit Offer"
                                            onclick="if(confirm('Are you sure you want to cancel editing this record without saving changes?')){window.parent.location.href = '{!$Label.LOP_Community_Base_URL}RSAP-PortalHome';return false;} else {return false;}"/>

                                        <span style="padding-right:250px;">&nbsp;</span>
                                        <!-- SFWS 2107 j.rogers 1/18/2023
                                         <a href="#" class="buttonred" id="view"
                                           onclick="if(confirm('Are you sure you want to permanently delete your offer?  If so, click OK.  Click Cancel to return to the page.')){deleteOffer(); return true;} else return false;">Delete
                                            Offer</a>
                                        -->
                                        
                                        <a href="#" class="buttonred" id="view"
                                            onclick="if(confirm('Are you sure you want to permanently delete your offer?  If so, click OK.  Click Cancel to return to the page.')){deleteOffer();window.parent.location.href = '{!$Label.LOP_Community_Base_URL}RSAP-PortalHome';return false;} else return false;">Delete
                                             Offer</a>

                                    </apex:outputPanel>
                                </apex:panelGrid>
                            </apex:panelGrid>
                        </apex:outputPanel>
                    </apex:outputPanel>

                    <script type="text/javascript"
                            src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
                    <script type="text/javascript"
                            src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>

                    <script type='text/javascript'>

                    </script>

                </apex:actionRegion>
            </apex:form>
        </div><!--/content-->
    </div><!-- /Wrapper -->

    </body>
    <script src="{!URLFOR($Resource.modaljquery)}"></script>
    <script type="text/javascript">
        //alert('test');
        JY = jQuery.noConflict();
        JY(document).ready(function () {
            console.log('here');
            resetEnergyStarFields();
            resetSeismicFields();
            resetEnergyStarMeetExceptions();
            bldMsg = JY('input[id=' + "'{!$Component.newOffer.bldMsg}'" + ']').val();
            if (bldMsg == '')
                addrFlag = false;
            else addrFlag = true;
            sessionStorage.setItem("addrFlag", addrFlag);

            //added by syam display msg when submitted offer is saved.
            draftMsgFlag = JY('input[id=' + "'{!$Component.newOffer.draftMsgFlag}'" + ']').val();
            
            if (draftMsgFlag == 'true') {
				
                var confirm1  =  JY('<div></div>').html("Your offer is no longer submitted. Offer status is updated to 'Draft' status and needs to be submitted again.").dialog({
                    autoOpen: false,
                    title: '',
                    modal: true,
                    position: ['center', 'top center'],
                    buttons: {
                        'OK': function () {
                            JY(this).dialog('close'); 
                            top.postMessage('Page Updated', document.location.origin);


                        }
                    }
                });

              confirm1.dialog('open');
             
            }
        });

        function limitfieldvalue(field){
            console.log('***Called');
            if(document.getElementById(field).value.length > 7){
                document.getElementById(field).value = document.getElementById(field).value.substring(0, 7);
            }
        }

        function validateZip() {
            var flag = true;
            var postalCodeRegex = /^([0-9]{5})(?:[-\s]*([0-9]{4}))?$/;
            var zipCd = JY('input[id=' + "'{!$Component.newOffer.bzip}'" + ']').val();
            if (zipCd != '') {
                flag = postalCodeRegex.test(zipCd);
                if (!flag) {
                    //alert('Please enter valid ZIP code in either 5-digit or 9-digit format, for example 12345 or 12345-6789.');
                    var confirm1 = JY('<div></div>').html("Please enter valid ZIP code in either 5-digit or 9-digit format, for example 12345 or 12345-6789.").dialog({
                        autoOpen: false,
                        title: '',
                        modal: true,
                        position: ['center', 'center'],
                        buttons: {
                            'OK': function () {
                                JY(this).dialog('close');
                                JY('input[id=' + "'{!$Component.newOffer.bzip}'" + ']').val("");
                                JY('input[id=' + "'{!$Component.newOffer.bzip}'" + ']').focus();
                            }
                        }
                    });

                    confirm1.dialog('open');
                }

            }
            return flag;
        }

        function resetSeismicFields() {
            console.log('Seismic');
            var flag = JY('input[name=' + "'{!$Component.newOffer.seismicOptions}'" + ']:checked').val();
            var seismicPanel = document.getElementById('{!$Component.newOffer.seismicPanel}');
            console.log('*** SGanti Seismic' + flag);
            console.log('*** SGanti Seismic' + seismicPanel);
            if (flag == "Yes") {
                JY(seismicPanel).show();
            }
            else {
                JY(seismicPanel).hide();
            }            
            
            /* J. Rogers - Fix scroll bar */
            top.postMessage('Page Updated', document.location.origin);
        }
//SGanti modified 10/2021
        function resetEnergyStarFields() {
            var flag = JY('input[name=' + "'{!$Component.newOffer.benergystar}'" + ']:checked').val();
            console.log('***SGanti '+flag);
           var noEnergyStarPanel = document.getElementById('{!$Component.newOffer.noEnergyStarPanel}');
            console.log('***SGanti '+noEnergyStarPanel);
            var certificationDatePanel = document.getElementById('{!$Component.newOffer.certificationDatePanel}');
            console.log('***SGanti '+certificationDatePanel);
            var eStarException1 = document.getElementById('{!$Component.newOffer.eStarException1}');
            console.log('***SGanti '+eStarException1);
            var eStarException2 = document.getElementById('{!$Component.newOffer.eStarException2}');
            console.log('***SGanti '+eStarException2);

            if (flag == "Yes") {
                
                JY(certificationDatePanel).show();
                JY(noEnergyStarPanel).hide();
                JY(eStarException1).hide();
                JY(eStarException2).hide();
            }
            else if (flag == "No") {
                JY(certificationDatePanel).hide();
                JY(noEnergyStarPanel).show();
            } else {
                JY(certificationDatePanel).hide();
                JY(noEnergyStarPanel).hide();
                JY(eStarException1).hide();
                JY(eStarException2).hide();

            }  
            
            /* J. Rogers - Fix scroll bar */
            top.postMessage('Page Updated', document.location.origin);
        }
    //SGanti added 10/2021    
      function resetEnergyStarMeetExceptions() {
            var flag = JY('input[name=' + "'{!$Component.newOffer.noenergystar}'" + ']:checked').val();
            console.log('***SGanti flag'+flag);
            var eStarException1 = document.getElementById('{!$Component.newOffer.eStarException1}');
            console.log('***SGanti exception1 '+eStarException1);
            var eStarException2 = document.getElementById('{!$Component.newOffer.eStarException2}');
            console.log('***SGanti exception2 '+eStarException2);
            if (flag == "Statutory Exception") {
                JY(eStarException1).show();
                JY(eStarException2).show();
             }
            else if (flag == "New construction") {
                JY(eStarException1).hide();
                JY(eStarException2).hide();
            } 
            else if (flag == "Insufficient Occupancy") {
                JY(eStarException1).hide();
                JY(eStarException2).hide();
            }
            else {
                JY(eStarException1).hide();
                JY(eStarException2).hide();
            }  
            
            /* J. Rogers - Fix scroll bar */
            top.postMessage('Page Updated', document.location.origin);
        }
//SGanti added 10/2021
     function init() {
        
            updateRenoYearTACounter();  
                  
        }

        function updateRenoYearTACounter() {
            var cnt = document.getElementById('{!$Component.newOffer.renoYearTA}').value.length;
            console.log('SGanti***'+cnt);
            var c = cnt + '/128';
            console.log('SGanti ***'+c);

            document.getElementById('{!$Component.newOffer.renoYearTACounter}').innerText = c;
            console.log('SGanti***'+document.getElementById('{!$Component.newOffer.renoYearTACounter}').innerText);


        }       
    
    </script>
    <c:SiteFooterUX />
</apex:page>